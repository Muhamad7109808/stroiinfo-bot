from aiogram import Bot, Dispatcher, types, executor
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
import logging
import os

API_TOKEN = os.getenv("TELEGRAM_API_TOKEN") or "your_token_here"

logging.basicConfig(level=logging.INFO)

bot = Bot(token=API_TOKEN)
dp = Dispatcher(bot)

main_menu = ReplyKeyboardMarkup(resize_keyboard=True)
main_menu.add(
    KeyboardButton("ğŸ“¦ ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹"),
    KeyboardButton("ğŸ“ ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ñƒ")
)
main_menu.add(
    KeyboardButton("ğŸ’° Ğ¦ĞµĞ½Ñ‹ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ"),
    KeyboardButton("ğŸ“¢ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° / ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸")
)
main_menu.add(KeyboardButton("ğŸ“ Ğ¡Ğ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹"))

@dp.message_handler(commands=['start'])
async def send_welcome(message: types.Message):
    await message.reply("ğŸ‘‹ Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ¡Ñ‚Ñ€Ğ¾Ğ¹Ğ˜Ğ½Ñ„Ğ¾ Ğ¢Ğ°Ğ´Ğ¶Ğ¸ĞºĞ¸ÑÑ‚Ğ°Ğ½!\nĞ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ:", reply_markup=main_menu)

@dp.message_handler(lambda message: message.text == "ğŸ“¦ ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹")
async def find_materials(message: types.Message):
    await message.answer("ğŸ” Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 'Ñ†ĞµĞ¼ĞµĞ½Ñ‚', 'Ğ¿ĞµÑĞ¾Ğº', 'ĞºĞ¸Ñ€Ğ¿Ğ¸Ñ‡'):")

@dp.message_handler(lambda message: message.text == "ğŸ“¢ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° / ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸")
async def send_ads(message: types.Message):
    await message.answer("ğŸ¯ Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ¾Ğµ Ğ¾Ğ±ÑŠÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ:\nğŸ”¥ Ğ¡ÑƒĞ¿ĞµÑ€-Ñ†ĞµĞ½Ñ‹ Ğ½Ğ° Ğ°Ñ€Ğ¼Ğ°Ñ‚ÑƒÑ€Ñƒ Ğ² Ğ”ÑƒÑˆĞ°Ğ½Ğ±Ğµ!\nğŸ“ +992902XXXXXX\nğŸ“ ĞĞ´Ñ€ĞµÑ: ÑƒĞ». Ğ›ĞµĞ½Ğ¸Ğ½Ğ° 14\nğŸ“† Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ´Ğ¾: 30 Ğ¸ÑĞ½Ñ")

@dp.message_handler(lambda message: message.text == "ğŸ“ ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ñƒ")
async def search_by_region(message: types.Message):
    await message.answer("ğŸ—º Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Ğ”ÑƒÑˆĞ°Ğ½Ğ±Ğµ, Ğ¥ÑƒĞ´Ğ¶Ğ°Ğ½Ğ´, Ğ‘Ğ¾Ñ…Ñ‚Ğ°Ñ€):")

@dp.message_handler(lambda message: message.text == "ğŸ’° Ğ¦ĞµĞ½Ñ‹ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ")
async def show_prices(message: types.Message):
    await message.answer("ğŸ“Š Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğµ Ñ†ĞµĞ½Ñ‹:\n- Ğ¦ĞµĞ¼ĞµĞ½Ñ‚ 500: 55 ÑĞ¾Ğ¼Ğ¾Ğ½Ğ¸/Ğ¼ĞµÑˆĞ¾Ğº\n- ĞÑ€Ğ¼Ğ°Ñ‚ÑƒÑ€Ğ° 12Ğ¼Ğ¼: 13 ÑĞ¾Ğ¼Ğ¾Ğ½Ğ¸/Ğ¼\n- Ğ©ĞµĞ±ĞµĞ½ÑŒ: 60 ÑĞ¾Ğ¼Ğ¾Ğ½Ğ¸/Ğ¼Â³")

@dp.message_handler(lambda message: message.text == "ğŸ“ Ğ¡Ğ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹")
async def contact_support(message: types.Message):
    await message.answer("ğŸ“ Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ½Ğ°Ğ¼ Ğ² WhatsApp:\n+9927109808\n+992002206817")

@dp.message_handler()
async def handle_search_query(message: types.Message):
    query = message.text.lower()
    await message.answer(f"ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ: {query}\n(Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ±ÑƒĞ´ÑƒÑ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ñ‹ Ğ¿Ğ¾Ğ·Ğ¶Ğµ)")

if __name__ == '__main__':
    executor.start_polling(dp, skip_updates=True)
